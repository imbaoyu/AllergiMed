/**
 * Easy to use Wizard library for AngularJS
 * @version v0.5.4 - 2015-08-24 * @link https://github.com/mgonto/angular-wizard
 * @author Martin Gontovnikas <martin@gon.to>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function wizardButtonDirective(n){angular.module("mgo-angular-wizard").directive(n,function(){return{restrict:"A",replace:!1,require:"^wizard",link:function(t,i,r,u){i.on("click",function(i){i.preventDefault();t.$apply(function(){t.$eval(r[n]);u[n.replace("wz","").toLowerCase()]()})})}}})}angular.module("templates-angularwizard",["step.html","wizard.html"]);angular.module("step.html",[]).run(["$templateCache",function(n){n.put("step.html",'<section ng-show="selected" ng-class="{current: selected, done: completed}" class="step" ng-transclude>\n<\/section>')}]);angular.module("wizard.html",[]).run(["$templateCache",function(n){n.put("wizard.html",'<div>\n    <ul class="steps-indicator steps-{{getEnabledSteps().length}}" ng-if="!hideIndicators">\n      <li ng-class="{default: !step.completed && !step.selected, current: step.selected && !step.completed, done: step.completed && !step.selected, editing: step.selected && step.completed}" ng-repeat="step in getEnabledSteps()">\n        <a ng-click="goTo(step)">{{step.title || step.wzTitle}}<\/a>\n      <\/li>\n    <\/ul>\n    <div class="steps" ng-transclude><\/div>\n<\/div>\n')}]);angular.module("mgo-angular-wizard",["templates-angularwizard"]);angular.module("mgo-angular-wizard").directive("wzStep",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{wzTitle:"@",title:"@",canenter:"=",canexit:"=",disabled:"@?wzDisabled"},require:"^wizard",templateUrl:function(n,t){return t.template||"step.html"},link:function(n,t,i,r){n.title=n.title||n.wzTitle;r.addStep(n)}}});angular.module("mgo-angular-wizard").directive("wizard",function(){return{restrict:"EA",replace:!0,transclude:!0,scope:{currentStep:"=",onFinish:"&",hideIndicators:"=",editMode:"=",name:"@"},templateUrl:function(n,t){return t.template||"wizard.html"},controller:["$scope","$element","$log","WizardHandler","$q",function(n,t,i,r,u){function o(t){var i,r;return t.canenter===undefined?!0:typeof t.canenter=="boolean"?t.canenter:(r=t.canenter(n.context),angular.isFunction(r.then))?(i=u.defer(),r.then(function(n){i.resolve(n)}),i.promise):t.canenter(n.context)===!0}function s(t,i){var r,f;return typeof t.canexit=="undefined"||n.getStepNumber(i)<n.currentStepNumber()?!0:typeof t.canexit=="boolean"?t.canexit:(f=t.canexit(n.context),angular.isFunction(f.then))?(r=u.defer(),f.then(function(n){r.resolve(n)}),r.promise):t.canexit(n.context)===!0}function e(){_.each(n.getEnabledSteps(),function(n){n.selected=!1});n.selectedStep=null}var f=!0;r.addWizard(n.name||r.defaultName,this);n.$on("$destroy",function(){r.removeWizard(n.name||r.defaultName)});n.steps=[];n.context={};n.$watch("currentStep",function(t){if(t){var i=n.selectedStep.title||n.selectedStep.wzTitle;n.selectedStep&&i!==n.currentStep&&n.goTo(_.findWhere(n.getEnabledSteps(),{title:n.currentStep}))}});n.$watch("[editMode, steps.length]",function(){var t=n.editMode;_.isUndefined(t)||_.isNull(t)||t&&_.each(n.getEnabledSteps(),function(n){n.completed=!0})},!0);this.addStep=function(t){n.steps.push(t);n.getEnabledSteps().length===1&&n.goTo(n.getEnabledSteps()[0])};this.context=n.context;n.getStepNumber=function(t){return _.indexOf(n.getEnabledSteps(),t)+1};n.goTo=function(t){if(f)e(),n.selectedStep=t,_.isUndefined(n.currentStep)||(n.currentStep=t.title||t.wzTitle),t.selected=!0,n.$emit("wizard:stepChanged",{step:t,index:_.indexOf(n.getEnabledSteps(),t)}),f=!1;else{var i;n.currentStepNumber()>0?i=n.currentStepNumber()-1:n.currentStepNumber()===0&&(i=0);u.all([s(n.getEnabledSteps()[i],t),o(t)]).then(function(i){i[0]&&i[1]&&(e(),n.selectedStep=t,_.isUndefined(n.currentStep)||(n.currentStep=t.title||t.wzTitle),t.selected=!0,n.$emit("wizard:stepChanged",{step:t,index:_.indexOf(n.getEnabledSteps(),t)}))})}};n.currentStepNumber=function(){return _.indexOf(n.getEnabledSteps(),n.selectedStep)+1};n.getEnabledSteps=function(){return _.filter(n.steps,function(n){return n.disabled!=="true"})};this.currentStepNumber=function(){return n.currentStepNumber()};this.next=function(t){var i=n.getEnabledSteps(),r=_.indexOf(i,n.selectedStep);if(angular.isFunction(t))if(t())r===i.length-1?this.finish():n.goTo(i[r+1]);else return;t||(n.selectedStep.completed=!0);r===i.length-1?this.finish():n.goTo(i[r+1])};this.goTo=function(t){var i=n.getEnabledSteps(),r;r=_.isNumber(t)?i[t]:_.findWhere(i,{title:t});n.goTo(r)};this.finish=function(){n.onFinish&&n.onFinish()};this.previous=function(){var t=_.indexOf(n.getEnabledSteps(),n.selectedStep);if(t===0)throw new Error("Can't go back. It's already in step 0");else n.goTo(n.getEnabledSteps()[t-1])};this.cancel=function(){var t=_.indexOf(n.getEnabledSteps(),n.selectedStep);if(t===0)throw new Error("Can't go back. It's already in step 0");else n.goTo(n.getEnabledSteps()[0])}}]}});wizardButtonDirective("wzNext");wizardButtonDirective("wzPrevious");wizardButtonDirective("wzFinish");wizardButtonDirective("wzCancel");angular.module("mgo-angular-wizard").factory("WizardHandler",function(){var n={},t={};return n.defaultName="defaultWizard",n.addWizard=function(n,i){t[n]=i},n.removeWizard=function(n){delete t[n]},n.wizard=function(i){var r=i;return i||(r=n.defaultName),t[r]},n});
//# sourceMappingURL=angular-wizard.min.js.map
